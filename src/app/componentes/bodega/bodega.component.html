<div class="container py-5">
    <h1 class="text-center mb-4">ðŸ“¦ Bodega del Supermercado</h1>

    <!-- Filtros -->
    <div class="d-flex flex-wrap justify-content-center align-items-center mb-4">
        <div class="col-md-4 px-2">
            <input type="text" class="form-control" placeholder="Buscar producto..." [(ngModel)]="filtroTemp">
        </div>

        <div class="col-auto px-2">
            <button class="btn btn-primary" (click)="buscar()">Buscar</button>
        </div>

        <div class="col-md-4 px-2">
            <select class="form-select" [(ngModel)]="categoriaSeleccionada" (change)="buscar()">
                <option value="">Todas las categorÃ­as</option>
                <option *ngFor="let categoria of categorias" [value]="categoria">{{ categoria }}</option>
            </select>
        </div>
    </div>

    <!-- Tabla de Bodega -->
    <table class="table table-dark table-striped text-center">
        <thead>
            <tr>
                <th>Producto</th>
                <th>CategorÃ­a</th>
                <th>Stock Disponible</th>
                <th>Stock MÃ­nimo</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let producto of productosFiltrados" [class.table-danger]="producto.stock <= producto.stockMinimo">
                <td>{{ producto.nombre }}</td>
                <td>{{ producto.categoria }}</td>
                <td>{{ producto.stock }}</td>
                <td>{{ producto.stockMinimo }}</td>
                <td>
                    <input type="number" class="form-control d-inline-block mx-1 text-center" #cantidadAgregar min="1" style="width: 55px; font-size: 14px;">
                    <button class="btn btn-success btn-sm fw-light" (click)="agregarStock(producto, cantidadAgregar.valueAsNumber)">
                        Agregar
                    </button>                                        
                    <input type="number" class="form-control d-inline-block mx-1 text-center" #cantidadRetirar min="1" style="width: 55px; font-size: 14px;">
                    <button class="btn btn-danger btn-sm fw-light" (click)="retirarStock(producto, cantidadRetirar.valueAsNumber)">
                        Retirar
                    </button>
                    <input type="number" class="form-control d-inline-block mx-1 text-center" #cantidadReabastecer min="1" style="width: 55px; font-size: 14px;">
                    <button class="btn btn-warning btn-sm fw-light" (click)="agregarAOrden(producto, cantidadReabastecer.valueAsNumber)">
                        Agregar a Orden
                    </button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Ã“rdenes de Reabastecimiento -->
    <h2 class="text-center mt-5">ðŸ“‹ Ã“rdenes de Reabastecimiento</h2>
    <button class="btn btn-primary mb-3" *ngIf="ordenes.length > 0" (click)="crearOrden()">
        Crear Orden
    </button>
    <table class="table table-warning table-striped text-center" *ngIf="ordenes.length > 0">
        <thead>
            <tr>
                <th>Producto</th>
                <th>CategorÃ­a</th>
                <th>Cantidad Solicitada</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let orden of ordenes">
                <td>{{ orden.nombre }}</td>
                <td>{{ orden.categoria }}</td>
                <td>{{ orden.cantidadSolicitada }}</td>
                <td>
                    <button class="btn btn-danger btn-sm fw-light" (click)="eliminarOrden(orden)">
                        Eliminar
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
